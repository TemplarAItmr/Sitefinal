---
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../utils/i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentYear = new Date().getFullYear();

const links = {
  empresa: [
    { text: t('footer.company.about'), href: '/sobre' },
    { text: t('footer.company.services'), href: '/servicos' },
    { text: t('footer.company.cases'), href: '/casos-sucesso' },
    { text: t('footer.company.blog'), href: '/blog' }
  ],
  legal: [
    { text: t('footer.legal.privacy'), href: '/politica-privacidade' },
    { text: t('footer.legal.terms'), href: '/termos-uso' }
  ],
  contacto: [
    { 
      text: '+351 913 139 933', 
      href: 'tel:+351913139933',
      icon: 'fas fa-phone'
    },
    { 
      text: 'templarai.tmr@gmail.com', 
      href: 'mailto:templarai.tmr@gmail.com',
      icon: 'fas fa-envelope'
    }
  ],
  social: [
    {
      icon: 'fab fa-facebook',
      href: 'https://facebook.com/templarai',
      label: 'Facebook'
    },
    {
      icon: 'fab fa-instagram',
      href: 'https://instagram.com/templarai',
      label: 'Instagram'
    }
  ]
};
---

<footer class="relative bg-neutral-900/50 glass py-12 mt-auto">
  <div class="container mx-auto px-4">
    <div class="grid md:grid-cols-4 gap-8">
      <div>
        <h3 class="text-2xl font-poppins font-bold gradient-text mb-4">TemplarAI</h3>
        <p class="text-sm text-white/80">
          {t('footer.description')}
        </p>
      </div>

      <div>
        <h4 class="font-semibold text-accent mb-4">{t('footer.company.title')}</h4>
        <ul class="space-y-2">
          {links.empresa.map(link => (
            <li>
              <a 
                href={getLocalizedPath(link.href, lang)}
                class="text-sm text-white/60 hover:text-accent transition-colors"
              >
                {link.text}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <div>
        <h4 class="font-semibold text-accent mb-4">{t('footer.legal.title')}</h4>
        <ul class="space-y-2">
          {links.legal.map(link => (
            <li>
              <a 
                href={getLocalizedPath(link.href, lang)}
                class="text-sm text-white/60 hover:text-accent transition-colors"
              >
                {link.text}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <div>
        <h4 class="font-semibold text-accent mb-4">{t('footer.contact.title')}</h4>
        <ul class="space-y-2">
          {links.contacto.map(link => (
            <li>
              <a 
                href={link.href}
                class="text-sm text-white/60 hover:text-accent transition-colors flex items-center gap-2"
              >
                <i class={link.icon}></i>
                {link.text}
              </a>
            </li>
          ))}
        </ul>
        
        <!-- Social Media Links -->
        <div class="mt-4 flex gap-4">
          {links.social.map(social => (
            <a
              href={social.href}
              target="_blank"
              rel="noopener noreferrer"
              class="text-white/60 hover:text-accent transition-colors text-2xl"
              aria-label={social.label}
            >
              <i class={social.icon}></i>
            </a>
          ))}
        </div>
      </div>
    </div>

    <div class="border-t border-white/10 mt-8 pt-8 text-center">
      <p class="text-sm text-white/60">
        Â© {currentYear} TemplarAI. {t('footer.rights')}
      </p>
    </div>
  </div>
</footer>